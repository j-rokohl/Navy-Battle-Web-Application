class Ship{constructor(e,t){function s(){let s=[];for(let i=0;i<e;i++){let r="url('"+t+".svg') -"+30*i+"px 0px no-repeat";s.push(r)}return s}function i(){let s=[];for(let i=0;i<e;i++){let r="url('./vertical/"+t+"Vertical.svg') 0px -"+30*i+"px no-repeat";s.push(r)}return s}this.name=t,this.boxWidth=e,this.imgFull=t+".svg",this.imgSliceArrayHoriz=s(),this.imgSliceArrayVert=i(),this.once=1}}const aircraftCarrier=new Ship(6,"aircraftCarrier"),battleship=new Ship(5,"battleship"),cruiser=new Ship(3,"cruiser"),submarine=new Ship(3,"submarine"),destroyer=new Ship(2,"destroyer"),myGrid=document.querySelectorAll("#myShips div div"),myShipId=document.getElementById("myShips");class Box{constructor(e,t){this.index=e,this.rowIndex=+String(this.index).padStart(2,"0").slice(0,1),this.columnIndex=+String(this.index).slice(-1),this.occupied="false"}}function setGrid(){let e=[],t,s=0;myGrid.forEach(function(){t=new Box(s),myGrid[s].setAttribute("data-occupied",t.occupied),myGrid[s].setAttribute("data-index",t.index),myGrid[s].setAttribute("data-rowindex",t.rowIndex),myGrid[s].setAttribute("data-columnindex",t.columnIndex),myGrid[s].setAttribute("data-ship","none"),myGrid[s].setAttribute("data-slice","none"),e.push(t),s++})}setGrid();let button="";function buttonListener(e,t){document.getElementById(e).addEventListener("click",function(s){let i=document.querySelector("body");i.style.cursor="url("+t+".svg), auto",button=e,boolButtonListener(e),callHighlighters(),bodyClickNoCursor(e)})}function boolButtonListener(e){let t=document.getElementById(e),s=t.parentElement.parentElement,i=s.getElementsByClassName("place"),r=i[0].getElementsByClassName("btn-dark");"Vertical"==t.innerHTML?r[0].dataset.horizontal="false":"Horizontal"==t.innerHTML&&(r[0].dataset.horizontal="true")}function callHighlighters(){switch(button){case"aircraftCarrier":case"rotateAircraftCarrier":placeShip(aircraftCarrier,6);break;case"battleship":case"rotateBattleship":placeShip(battleship,5);break;case"cruiser":case"rotateCruiser":placeShip(cruiser,3);break;case"submarine":case"rotateSubmarine":placeShip(submarine,3);break;case"destroyer":case"rotateDestroyer":placeShip(destroyer,2)}}function placeShip(e,t){let s=document.getElementById(e.name).dataset.horizontal,i=e.once;0===i&&alert("This ship is already placed. Press the Reset button if you need to place your ships again."),"true"==s?(horizontalHighlightListener("mouseover",t,"#4c7bad"),horizontalHighlightListener("mouseout",t,""),dropImageHorizontal(e,t)):"false"==s&&(verticalHighlightListener("mouseover",t,"#4c7bad"),verticalHighlightListener("mouseout",t,""),dropImageVertical(e,t))}function horizontalHighlightListener(e,t,s){myShipId.addEventListener(e,function(e){if(e.target.classList.contains("box")){let i=+e.target.dataset.index,r=myGrid[i].dataset.rowindex,a=i+t,n=[90,91,92,93,94,95,96,97,98,99].slice(0,-(t-1));function o(){for(let e=0;e<=99;e++)myGrid[e].style.backgroundColor=""}function l(){o();for(let e=i;e<a;e++)myGrid[e].style.backgroundColor=s}function c(){myGrid[i].style.cursor=""}function d(){myGrid[i].style.cursor="not-allowed",o()}switch(9==r){case i>n[n.length-1]:d();break;case i<=n[n.length-1]:l(),c()}if(0==i)l(),c();else if(9!=r){let u=myGrid[a-1].dataset.rowindex;r!=u?d():r==u&&(l(),c())}}})}function verticalHighlightListener(e,t,s){myShipId.addEventListener(e,function(e){if(e.target.classList.contains("box")){let i=+e.target.dataset.index,r=(t-1)*10,a=i+r;function n(){for(let e=0;e<=99;e++)myGrid[e].style.backgroundColor=""}i>99-r?(myGrid[i].style.cursor="not-allowed",n()):(!function e(){n();for(let t=i;t<=a;t+=10)myGrid[t].style.backgroundColor=s}(),myGrid[i].style.cursor="")}})}function bodyClickNoCursor(){document.body.addEventListener("click",function(e){if(!0==e.target.classList.contains("btn")||!0==e.target.classList.contains("fa-4"));else for(let t=0;t<=99;t++)horizontalHighlightListener("mouseover",0,""),verticalHighlightListener("mouseover",0,""),document.body.style.cursor="default"})}function dropImageHorizontal(e,t){myShipId.addEventListener("click",function(s){if(s.target.classList.contains("box")){let i=+s.target.dataset.index,r=myGrid[i].dataset.rowindex,a=myGrid[+i+(t-1)].dataset.rowindex,n=t-1,o=document.querySelectorAll("#myShips div div"),l=[];if(0==e.once)return;if(r!=a){alert("This ship goes off the board. Please try another spot.");return}let c=+i;for(let d=0;d<=n;d++){let u=o[c].getAttribute("data-occupied");l.push(u),c++}for(let h=0;h<=l.length;h++)if("true"==l[h]){alert("You cannot place ships over other ships. Please try another spot.");return}let p=+i;for(let y=0;y<=n;y++){let g=String(e.name);o[p].setAttribute("class","box horizontal"),o[p].dataset.occupied="true",o[p].dataset.ship=g,o[p].style.background=e.imgSliceArrayHoriz[y],o[p].dataset.slice=String(e.imgSliceArrayHoriz[y]),p++}e.once=0}},{once:!0})}function dropImageVertical(e,t){myShipId.addEventListener("click",function(s){let i=String(e.name),r=+s.target.dataset.index,a=document.querySelectorAll("#myShips div div"),n=[];if(0==e.once||!s.target.classList.contains("box"))return;if(+r+(t-1)*10>99){alert("This ship goes off the board. Please try another spot.");return}let o=+r;for(let l=0;l<=t-1;l++){let c=a[o].getAttribute("data-occupied");n.push(c),o+=10}console.log(n);for(let d=0;d<=n.length;d++)if("true"==n[d]){alert("You cannot place ships over other ships. Please try another spot.");return}let u=+r;for(let h=0;h<=t-1;h++)a[u].setAttribute("class","box vertical"),a[u].dataset.occupied="true",a[u].dataset.ship=i,a[u].style.background=e.imgSliceArrayVert[h],a[u].dataset.slice=String(e.imgSliceArrayVert[h]),u+=10;e.once=0},{once:!0})}function eraseShip(e,t){document.getElementById(t).addEventListener("click",function(t){let s=document.querySelectorAll("#myShips div div"),i=String(e.name);for(let r=0;r<100;r++)s[r].dataset.ship==i&&(s[r].setAttribute("class","box"),s[r].dataset.ship="none",s[r].dataset.occupied="false",s[r].style.background="");e.once=1})}function playTheGame(e){document.getElementById(e).addEventListener("click",function(e){document.getElementById("wrapper").innerHTML=`<h2 class="text-center">My Vessels</h2>
        <div class=sink-div><div class=sink-svg><img alt="My Aircraft Carrier"height=20 src=./aircraftCarrier.svg>
        <p class=labels>USS Aircraft Carrier</div><div class=sink><a class="btn btn-secondary btn-sm" 
        data-horizontal=false id=sinkMyAircraftCarrier>Sunk</a></div></div><div class=sink-div><div class=sink-svg>
        <img alt="My Battleship"height=20 src=./battleship.svg><p class=labels>USS Battleship</div><div class=sink>
        <a class="btn btn-secondary btn-sm"data-horizontal=false id=sinkMyBattleship>Sunk</a></div></div>
        <div class=sink-div><div class=sink-svg><img alt="My Cruiser"height=20 src=./cruiser.svg><p class=labels>USS Cruiser</div>
        <div class=sink><a class="btn btn-secondary btn-sm"data-horizontal=false id=sinkMyCruiser>Sunk</a></div></div>
        <div class=sink-div><div class=sink-svg><img alt="My Submarine"height=20 src=./submarine.svg><p class=labels>USS Submarine</div>
        <div class=sink><a class="btn btn-secondary btn-sm"data-horizontal=false id=sinkMySubmarine>Sunk</a></div></div>
        <div class=sink-div><div class=sink-svg><img alt="My Destroyer"height=20 src=./destroyer.svg>
        <p class=labels>USS Destroyer</div><div class=sink><a class="btn btn-secondary btn-sm"data-horizontal=false id=sinkMyDestroyer>
        Sunk</a></div></div>
        `,sinkShips("sinkMyAircraftCarrier","./aircraftCarrier.svg","./my-ships/myAircraftCarrierSunk.svg"),sinkShips("sinkMyBattleship","./battleship.svg","./my-ships/myBattleshipSunk.svg"),sinkShips("sinkMyCruiser","./cruiser.svg","./my-ships/myCruiserSunk.svg"),sinkShips("sinkMySubmarine","./submarine.svg","./my-ships/mySubmarineSunk.svg"),sinkShips("sinkMyDestroyer","./destroyer.svg","./my-ships/myDestroyerSunk.svg"),myPegs()},{once:!0})}function myPegs(){myGrid.forEach(function(e){let t=e.getAttribute("data-slice"),s=["url('./pegs/splash.png')","url('./pegs/clear.png')"],i=["url('./pegs/explosion.png')",t];e.addEventListener("click",function(){let t=e.getAttribute("data-occupied");if("false"==t){let r=s.shift();s.push(r),e.style.backgroundImage=r}else if("true"==t){let a=i.shift();i.push(a),e.style.background=a}})})}function resetMyShipGrid(e){document.getElementById(e).addEventListener("click",function(e){location.reload()})}buttonListener("aircraftCarrier","aircraftCarrier"),buttonListener("battleship","battleship"),buttonListener("cruiser","cruiser"),buttonListener("submarine","submarine"),buttonListener("destroyer","destroyer"),buttonListener("rotateAircraftCarrier","aircraftCarrier"),buttonListener("rotateBattleship","battleship"),buttonListener("rotateCruiser","cruiser"),buttonListener("rotateSubmarine","submarine"),buttonListener("rotateDestroyer","destroyer"),eraseShip(aircraftCarrier,"eraseAircraftCarrier"),eraseShip(battleship,"eraseBattleship"),eraseShip(cruiser,"eraseCruiser"),eraseShip(submarine,"eraseSubmarine"),eraseShip(destroyer,"eraseDestroyer"),playTheGame("ready"),resetMyShipGrid("restart");const yourGrid=document.querySelectorAll("#yourShips div div");yourGrid.forEach(function(e){let t=["url('./pegs/splash.png')","url('./pegs/explosion.png')","url('./pegs/clear.png')"];e.addEventListener("click",function(){let s=t.shift();t.push(s),e.style.backgroundImage=s})});const splash=new Audio("./sounds/splash.mp3"),explosion=new Audio("./sounds/explode.mp3"),clear=new Audio("./sounds/woosh.mp3");function sinkShips(e,t,s){document.getElementById(e).addEventListener("click",function(i){let r=document.getElementById(e),a=r.parentElement.parentElement,n=a.getElementsByClassName("sink-svg");"false"==r.dataset.horizontal?(n[0].children[0].src=s,r.setAttribute("data-horizontal","true"),r.innerHTML="Undo"):"true"==r.dataset.horizontal&&(n[0].children[0].src=t,r.setAttribute("data-horizontal","false"),r.innerHTML="Sunk")})}function closeModalClick(e){document.getElementById(e).addEventListener("click",function(e){document.getElementById("modal").style.display="none"},{once:!0})}function closeModalFocus(e){document.getElementById(e).addEventListener("keydown",e=>{"Enter"==e.key&&(document.getElementById("modal").style.display="none")},{once:!0})}yourGrid.forEach(function(e){let t=[splash,explosion,clear];e.addEventListener("click",function(){sound=t.shift(),t.push(sound),sound.play()})}),sinkShips("sinkAircraftCarrier","./your-ships/yourAircraftCarrier.svg","./your-ships/yourAircraftCarrierSunk.svg"),sinkShips("sinkBattleship","./your-ships/yourBattleship.svg","./your-ships/yourBattleshipSunk.svg"),sinkShips("sinkCruiser","./your-ships/yourCruiser.svg","./your-ships/yourCruiserSunk.svg"),sinkShips("sinkSubmarine","./your-ships/yourSubmarine.svg","./your-ships/yourSubmarineSunk.svg"),sinkShips("sinkDestroyer","./your-ships/yourDestroyer.svg","./your-ships/yourDestroyerSunk.svg"),closeModalClick("closeModal1"),closeModalClick("closeModal2"),closeModalFocus("closeModal1"),closeModalFocus("closeModal2");const slider=document.getElementById("slider"),output=document.getElementById("output");output.innerHTML="0",slider.oninput=function(){output.innerHTML=this.value};